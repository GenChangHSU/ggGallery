---
title: "Post #38. Creating ternary plots with `ggtern`"
description: |
  Come and learn some useful tips for creating ternary plots in ggplot!
author:
  - name: Gen-Chang Hsu
date: 2024-12-20
output:
  distill::distill_article:
    self_contained: false
categories:
  - "2024"
preview: ../../homepage_images/Post38.png
draft: true
---

<!-- Webpage style -->

<style>
d-article a {
  color: #2780e3 !important;
  border-bottom: none !important;
}

d-article a:hover {
  color: #2780e3 !important;
  border-bottom: 2px solid !important;
}

d-byline {
  margin-left: -10% !important;
}

d-title {
  margin-left: -10%;
}

d-title h1{
  font-size: 45px;
  width: 130%;
}

d-article {
  margin-left: -10%;
}

p {
  width: 120%;
}

d-article h2 {
  width: 120%;
}

d-article h3 {
  width: 120%;
  font-size: 28px;
}

div.article-footer{
  width: 120%;
}

d-article div.sourceCode { 
  width: 120% !important;
}

d-article pre { 
  width: 120% !important;
}

div.l-body {
  width: 120% !important;
}

d-article table thead tr {
  height: 60px !important;
  width: 210px !important;
}

d-article table thead th {
  height: 60px !important;
  font-size: 22px !important;
  width: 210px !important;
}

d-article table tbody tr td {
  font-size: 21px !important;
  height: 60px !important;
  text-align: center !important;
  width: 210px !important;
}

div.l-body img {
    margin-right: 30% !important;
}

</style>

<head>
  <base target="_blank">
</head>

```{r setup, include = FALSE}
knitr::opts_chunk$set(message = F, 
                      error = F, 
                      warning = F,
                      fig.align = "center")

```

<!-- Start of the article -->

## Introduction

Welcome to the end-of-year post! Really glad to conclude 2024 with this one!

You may (or may not) have heard of it, a [ternary plot](https://en.wikipedia.org/wiki/Ternary_plot#) is a type of plot that displays the relative proportions of three variables in an equilateral triangle. It's a more specialized plot type and certainly not the one you'll see in everyday life, but it can be quite handy when it comes to visualizing compositional data, for example, the carbohydrates, protein, and fat composition of food items.

I remember I first came across a ternary plot in an Ecology textbook years ago when I was learning the classic [Grime's CRS Triangle](https://meristemhorticulture.com/planted/tag/Grime%27s+triangle) for depicting three major plant life strategies (competitor, stress-tolerator, and ruderal) under different stress, resource, and disturbance regimes. I was really fascinated with it, but I didn't know how to make one myself back then. Now I know, and I thought it would be fun (and useful too!) to write a post on creating ternary plots in ggplot. So let's dive in!

## Ternary plots with `ggtern`

The extension package [`ggtern`](https://cran.r-project.org/web/packages/ggtern/index.html) provides a suite of functions for creating ternary plots in ggplot. We'll start from the very basics, gradually add in some variation and complexity, and finally finish by polishing the plot appearance.

### 1. Create a basic ternary plot 

First, let's create a super simple ternary plot with just one single point. 

`ggtern()` is the master function here: it takes a dataframe with three numeric columns, which are then mapped to the "x", "y", and "z" aesthetic. If the three columns are not proportions but instead raw values, the function will automatically rescale them so that each row sums to 1.

In the example below, I also drew the lines connecting the point to the sides using the function `geom_crosshair_tern()` and added the arrows to the axes to indicate the corresponding variables using the function `theme_arrownormal()`. These will help us better understand what the plot is doing.

```{r, fig.width = 5, fig.height = 4}
library(tidyverse)
library(ggtern)

### Generate ternary data
ternary_df <- data.frame(x = 1, y = 2, z = 3)

### Create a basic ternary plot
ggtern(data = ternary_df, aes(x = x, y = y, z = z)) +
  geom_point() + 
  geom_crosshair_tern() +  # draw the connecting lines
  theme_arrownormal()  # add the axes arrows

```

If you're new to ternary plots, you may wonder how to read the plot. Well, as indicated by the lines connected to the edges, this point corresponds to an x-value of around 17% (1/6), an y-value of around 33% (2/6), and an z-value of 50% (3/6). 

For plots that do not show the lines (which are most likely what you'll see in the wild), you can also use the angle of the axis text to tell the corresponding edges.


### 2. ternary line charts

```{r, fig.width = 5, fig.height = 4}
library(tidyverse)
library(ggtern)




```


### 3. Density plot and contour plot


### 4. hex plot and tri plot



### 5. Interpolation of z values



### 6. Adjust the appearance and axis and annotations













## Summary


Hope you learn something useful from this post and don't forget to leave your comments and suggestions below if you have any!